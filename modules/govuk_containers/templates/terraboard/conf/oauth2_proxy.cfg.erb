# OAuth2 Proxy Config File
# https://github.com/bitly/oauth2_proxy

# <addr>:<port> to listen on for HTTP clients
http_address = "0.0.0.0:4180"

# The HTTP URL(s) of the upstream endpoint(s)
# If multiple, routing is based on path
upstreams = ["http://terraboard:8080/"]

# Email domains to allow authentication for (this authorises any email on this domain)
email_domains = ["*"]

# OAuth provider, client ID, secret and redirect URL
provider = "github"
client_id = "<%= @github_oauth_client_id %>"
client_secret = "<%= @github_oauth_client_secret %>"
redirect_url = "<%= @oauth2_proxy_base_url %>/oauth2/callback"

# GitHub organisation and team to restrict authentication to
github_org = "alphagov"
github_team = "gov-uk-production"

# Don't display the default footer
footer = "-"

## Cookie settings
## Name     - the cookie name
## Secret   - the seed string for secure cookies; should be 16, 24, or 32 bytes
##            for use with an AES cipher when cookie_refresh or pass_access_token
##            is set
## Domain   - (optional) cookie domain to force cookies to (ie: .yourcompany.com)
## Expire   - (duration) expire timeframe for cookie
## Refresh  - (duration) refresh the cookie when duration has elapsed after cookie was initially set.
##            Should be less than cookie_expire; set to 0 to disable.
##            On refresh, OAuth token is re-validated.
##            (ie: 1h means tokens are refreshed on request 1hr+ after it was set)
## Secure   - secure cookies are only sent by the browser of a HTTPS connection (recommended)
## HttpOnly - httponly cookies are not readable by javascript (recommended)
cookie_name = "_terraboard_oauth2_proxy"
cookie_secret = "<%= @oauth2_proxy_cookie_secret %>"
# cookie_domain = ""
cookie_expire = "24h"
cookie_refresh = "1h"
cookie_secure = true
cookie_httponly = true
